---
title: 蚁群算法具体实现
date: 2025/02/25 08:24:08
author: lele
tags:
  - 人工智能
categories:
  - 人工智能
  - 智能计算
---
通过一个**极简的旅行商问题（TSP）**来详细说明蚁群算法的步骤。假设有 **3 个城市（A, B, C）**，城市间的距离如下：

```
A → B：2 km  
A → C：3 km  
B → C：4 km  
B → A：2 km（对称路径）  
C → A：3 km  
C → B：4 km  
```

目标是找到一条最短路径，从某个城市出发，访问所有城市后回到起点。

---

### **步骤 1：初始化参数**
- **信息素矩阵**：每条路径初始信息素设为 **τ₀ = 1**。
- **蚂蚁数量**：2 只蚂蚁（Ant1, Ant2）。
- **挥发率 ρ = 0.3**（每次迭代后信息素减少30%）。
- **启发式因子 α=1, β=2**（信息素和距离的权重）。
- **信息素增强常数 Q = 10**。

初始信息素表：

| 路径  | 信息素 |
| :-: | :-: |
| A→B |  1  |
| A→C |  1  |
| B→A |  1  |
| B→C |  1  |
| C→A |  1  |
| C→B |  1  |

---

### **步骤 2：蚂蚁构建路径**
每只蚂蚁随机选择一个起点，逐步访问所有城市。

#### **蚂蚁1的路径（假设起点为A）**：
1. **从A出发**，可选B或C。
2. **计算选择概率**：
   - 路径A→B的吸引力：  
     \( (τ_{AB})^α \times (1/距离_{AB})^β = 1^1 \times (1/2)^2 = 0.25 \)
   - 路径A→C的吸引力：  
     \( 1^1 \times (1/3)^2 ≈ 0.111 \)
   - 总吸引力：0.25 + 0.111 ≈ 0.361
   - 概率：  
     - P(A→B) = 0.25 / 0.361 ≈ **69.2%**  
     - P(A→C) = 0.111 / 0.361 ≈ **30.8%**
3. **按概率选择路径**：假设蚂蚁1选择 **A→B**。
4. **到达B后**，只剩城市C未访问，必须选择 **B→C**。
5. **最后从C返回起点A**，路径为 **C→A**。
   
**蚂蚁1的完整路径**：A → B → C → A  
**总距离**：2 (A→B) + 4 (B→C) + 3 (C→A) = **9 km**

---

#### **蚂蚁2的路径（假设起点为B）**：
1. **从B出发**，可选A或C。
2. **计算选择概率**：
   - 路径B→A的吸引力：\( 1^1 \times (1/2)^2 = 0.25 \)
   - 路径B→C的吸引力：\( 1^1 \times (1/4)^2 = 0.0625 \)
   - 总吸引力：0.25 + 0.0625 = 0.3125
   - 概率：  
     - P(B→A) = 0.25 / 0.3125 = **80%**  
     - P(B→C) = 0.0625 / 0.3125 = **20%**
3. **按概率选择路径**：假设蚂蚁2选择 **B→A**。
4. **到达A后**，只剩城市C未访问，必须选择 **A→C**。
5. **最后从C返回起点B**，路径为 **C→B**。
   
**蚂蚁2的完整路径**：B → A → C → B  
**总距离**：2 (B→A) + 3 (A→C) + 4 (C→B) = **9 km**

---

### **步骤 3：更新信息素**
#### **局部更新（每只蚂蚁贡献信息素）**：
- 信息素增量公式：\( Δτ = Q / \text{路径总长度} \)
- **蚂蚁1**（路径长度9）：每条边增加 \( Δτ = 10/9 ≈ 1.11 \)
  - 更新路径：A→B, B→C, C→A
- **蚂蚁2**（路径长度9）：每条边增加 \( Δτ = 10/9 ≈ 1.11 \)
  - 更新路径：B→A, A→C, C→B

#### **挥发后信息素**：
每条路径的信息素先挥发30%，再增加蚂蚁贡献：
- 原信息素：1 → 挥发后：1 × (1-0.3) = 0.7
- 新增信息素：
  - A→B: 0.7 + 1.11 ≈ **1.81**
  - B→C: 0.7 + 1.11 ≈ **1.81**
  - C→A: 0.7 + 1.11 ≈ **1.81**
  - B→A: 0.7 + 1.11 ≈ **1.81**
  - A→C: 0.7 + 1.11 ≈ **1.81**
  - C→B: 0.7 + 1.11 ≈ **1.81**

此时所有路径信息素相同（因为两只蚂蚁路径长度相同），但若某只蚂蚁找到更短路径，其贡献的信息素会更高。

---

### **步骤 4：第二次迭代**
假设在第二次迭代中，蚂蚁1选择路径 **A→C→B→A**（总长度3+4+2=9 km），蚂蚁2选择 **B→C→A→B**（总长度4+3+2=9 km），信息素更新与第一次类似。

经过多次迭代后，如果某条路径（如A→B→C→A）被频繁选择且距离更短，其信息素会显著高于其他路径，最终引导蚂蚁收敛到最优解。

---

### **关键点总结**
1. **正反馈**：短路径被更多蚂蚁选择 → 信息素浓度更高 → 后续蚂蚁更倾向于选择它。
2. **挥发机制**：避免信息素无限积累，让算法能跳出局部最优。
3. **启发式因子**：β 越大，蚂蚁越倾向于选择距离短的路径。

---

### **最终效果**
- 如果存在更短路径（例如A→B→C→A总长9 km，而A→C→B→A总长7 km），算法会通过信息素差异逐渐收敛到更优解。
- 经过多次迭代，信息素矩阵会清晰反映最优路径。

通过这个简单例子，可以看到蚁群算法如何通过“群体协作”逐步逼近最优解！